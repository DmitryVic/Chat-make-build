# Проект [Chat](https://github.com/DmitryVic/Chat-HW-Project) переписан под сборку make с хранением истории чата в файлах

**Студент** - Зайкин Дмитрий
**Группа** - CPLUS-68



## Условие задания проекта:

**Функционал приложения:**
> - консольная программа
> - регистрация пользователей - логин, пароль, имя
> - вход в чат по логину/паролю
> - отправка сообщений конкретному пользователю
> - обмен сообщениями между всеми пользователями чата одновременно

### Задание 18.12.1
**Задание повышенной сложности**
1. Напишите Makefile сборки проекта чата, который вы сделали в предыдущих учебных модулях. Сделайте в нём несколько синтетических целей.
2. Дополните проект чата сохранением в файлы информации о зарегистрированных пользователях и историей сообщений, таким образом, чтобы при выходе из чата и последующем входе в него состояние программы восстанавливалось до состояния, которое было перед завершением.

---

Кросплатформанный проект в кодировке UTF-8

---

### Классы:
- `User` — класс пользователя, хранит указатели на приватные чаты `ChatPrivate` 
- `Database` — обмен данными авторизации с `User`, хранит указатели на всех пользователей `shared_ptr`, создает пользователей `User`, а также авторизует их 
- `Chat` — родительский класс `ChatPrivate`, `ChatHared` 
	- `ChatPrivate` — хранит указатели на пользователей `User` (кому принадлежит данный чат) и историю чата (указатель на `User` (кто написал сообщение) и текст сообщения), объект `User` хранит указатели на чаты `ChatPrivate`, что обеспечивает доступ к уже имеющимся приватным чатам. При создании добавляются 2 пользователя, больше добавлять пользователей нельзя. 
	- `ChatHared` — общий чат для всех, хранит историю сообщений (указатель на `User` (кто написал сообщение) и текст сообщения).

### Файлы:

#### Заголовочные файлы в папке include

- **user.h** — заголовочный файл класса `User`
- **database.h** — заголовочный файл класса `Database`
- **chat.h** — заголовочный файл класса `Chat`
- **chatPrivate.h** — заголовочный файл класса `ChatPrivate`
- **chathared.h** — заголовочный файл класса `ChatHared`
- **interactionChatHared.h** — реализация функций по взаимодействию с классом `ChatHared`
- **interactionChatPrvate.h** — реализация функций по взаимодействию с классом `ChatPrivate`
- **colorConsole.h** — цветовые макросы для консоли
- **template.h** — файл реализации шаблонов
- **exept.h** — файл реализации исключений
- **file.h** — заголовочный файл функций взаимодействия с файлами сохранения
- **hashPass.h**  — хэш-функция

#### .cpp файлы папке src

- **main.cpp** — основной файл программы
- **user.cpp** — .cpp файл класса `User`
- **database.cpp** — .cpp файл класса `Database`
- **chat.cpp** — .cpp файл класса `Chat`
- **chatPrivate.cpp** — .cpp файл класса `ChatPrivate`
- **chathared.cpp** — .cpp файл класса `ChatHared`
- **file.h** — файл функций взаимодействия с файлами сохранения

# Сборка

## Убедитесь, что установлен g++:

### Linux:
```bash
sudo apt update
sudo apt install g++ make
```
### Windows MSYS2 
❗ Дополнительно добавить пути path, зависит куда установлены пакеты, например:
- `C:\msys64\mingw64\bin`
- `C:\msys64\mingw64\include`
```bash
pacman -S mingw-w64-ucrt-x86_64-g++ make
```

## Сборка проекта:
```bash
make all
```

## Запуск приложени Chat
```bash
./chat
```

## Очистить файлы сборки с удалением скомпилированного файла
```bash
make clean
```

# ❗ Важно

Приложение требует русскую локализацию в кодировке UTF-8. Если данная локализация отсутствует в Linux,  выполнить установку:
```bash
# Генерация русской локали
sudo locale-gen ru_RU
sudo locale-gen ru_RU.UTF-8

# Обновление локалей
sudo update-locale LANG=ru_RU.UTF-8

# Проверка доступных локалей
locale -a | grep ru_RU
# ru_RU
# ru_RU.iso88595
# ru_RU.utf8

```